{"version":3,"sources":["webpack:///./main.ts"],"names":["range","rxjs","map","filter","operators","moneyFormat","int","x","String","split","x1","x2","length","rgx","test","replace","generateModalCart","fetch","then","response","json","data","goods","totalSum","html","cartData","JSON","parse","localStorage","getItem","cartCount","Object","keys","document","querySelector","textContent","key","good","alias","preview","photo","title","id","vendor_code","prices","new","parseInt","innerHTML","innerText","setAttribute","value","stringify","catch","error","console","pipe","subscribe","log","Page","this","currentUrl","location","pathname","substr","trim","alert","setTitle","deliveryTypes","getElementById","deliveryTypesHtml","window","onload","formEls","querySelectorAll","forEach","e","insertAdjacentHTML","Intl","DateTimeFormat","resolvedOptions","timeZone","ymaps","geolocation","city","hasOwnProperty","goodUrl","status","goodHtml","images","old","text","goodCategories","categories","goodCategoriesStr","goodCategoryKey","quantity","label","subtitle","btn","addEventListener","goodId","goodLink","preventDefault","dataset","getAttribute","link","tns","container","gutter","items","slideBy","controlsPosition","controlsText","nav","navPosition","speed","autoplay","autoplayTimeout","loop","responsive","0","480","768","970","lazyload","$","modal","href","btnOpenCartEl","onclick","oncontextmenu","mainTriggers","number","item","itemNumber","itemText","triggersEl","generateHTML","filterLinks","li","classList","remove","parentElement","add","categoryAlias","slice","el","style","display","SimpleLightbox","sourceAttr","overlay","spinner","navText","captions","captionSelector","captionType","edgePadding","body","target","contains","disabled","price","parseFloat","setItem","fbq","currency","content_type","content_ids","clear","numberSpinnerInput","Array","from","parentNode","children","child","tagName","oldValue","newVal","dir","click","confirm","removeAttribute","lazyImages","observer","IntersectionObserver","image","intersectionRatio","src","root","rootMargin","threshold","observe","scrollBtnLinkEls","getElementsByClassName","animate","scrollTop","offset","top","orderId","s","search","match","RegExp","Promise","resolve","reject","request","XMLHttpRequest","open","delivery","cost","sum","fullname","i","selling_price","fulladdress","onerror","send","created_at","date","totalsum","scrollToTopBtn","rootElement","documentElement","scrollTo","behavior","scrollTotal","scrollHeight","clientHeight","tag","file","res","cartModalNameEl","onkeypress","event","keyCode","telInputs","input","IMask","mask","definitions","lazy","placeholderChar","call","ind","index","deliveryTypeEls","getElementsByName","deliveryTypeEl","onchange","fullYear","Date","getFullYear","copyrightYearEl","color"],"mappings":"MAIA,MAAM,MAAEA,GAAUC,MACZ,IAAEC,EAAG,OAAEC,GAAWF,KAAKG,UAc7B,SAASC,EAAYC,GACjB,IACIC,EADMC,OAAOF,GACLG,MAAM,KACdC,EAAKH,EAAE,GACPI,EAAKJ,EAAEK,OAAS,EAAI,IAAML,EAAE,GAAK,GACjCM,EAAM,eACV,KAAOA,EAAIC,KAAKJ,IACZA,EAAKA,EAAGK,QAAQF,EAAK,SAEzB,OAAOH,EAAKC,EAShB,SAASK,IAERC,MAAM,aACJC,MAAMC,GAAaA,EAASC,SAC5BF,MAAMG,IACG,IAAIC,EAAQD,EAAKC,MACtBC,EAAW,EAEXC,EAAO,UACPC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,SAC3CC,EAAYC,OAAOC,KAAKP,GAAUb,OAItC,GAFAqB,SAASC,cAAc,yBAAyBC,YAAcL,GAAwB,EAEnFA,EAEF,IAAIM,KAAOX,EAAU,CAEpB,IAAIY,EAAOf,EAAMc,GACdC,IACFb,GAAQ,OACRA,GAAQ,mDAAqDa,EAAKC,MAAQ,WAAaD,EAAKE,QAAQC,MAAM,GAAK,4BAC/GhB,GAAQ,yBACRA,GAAQ,OAASa,EAAKI,MAAQ,2EAA6EJ,EAAKK,GAAK,gFAAkFL,EAAKM,YAAc,OAC1NnB,GAAQ,2BAEPA,GAAQ,wCACPA,GAAQ,0GACRA,GAAQ,6BAA+BC,EAASW,GAAO,cAAgBC,EAAKK,GAAK,KACjFlB,GAAQ,uGACTA,GAAQ,SAERA,GAAQ,yBAA2BnB,EAAYgC,EAAKO,OAAOC,KAAO,gBAEnErB,GAAQ,SACRA,GAAQ,QACRA,GAAQ,wBACPA,GAAQ,wCACPA,GAAQ,0GACRA,GAAQ,6BAA+BC,EAASW,GAAO,cAAgBC,EAAKK,GAAK,KACjFlB,GAAQ,uGACTA,GAAQ,SACTA,GAAQ,QACRA,GAAQ,2CAA6CnB,EAAYgC,EAAKO,OAAOC,KAAO,eACpFrB,GAAQ,oFAAsFa,EAAKK,GAAK,yDACxGlB,GAAQ,QAERD,GAAYuB,SAAST,EAAKO,OAAOC,KAAOpB,EAASW,SAInDZ,GAAQ,sDAETA,GAAQ,WACRS,SAASC,cAAc,mBAAmBa,UAAYvB,EACtDS,SAASC,cAAc,aAAac,UAAY3C,EAAYkB,GAC5DU,SAASC,cAAc,mBAAmBe,aAAa,gBAAgB1B,GACvEU,SAASC,cAAc,gBAAgBe,aAAa,eAAe,KAAO5C,EAAYkB,GAAY,OAClGU,SAASC,cAAc,qCAAqCgB,MAAQxB,KAAKyB,UAAU1B,MAEjF2B,OAAMC,IAAUC,QAAQD,MAAM,iBAAkBA,MA1FrDrD,EAAM,EAAG,IACNuD,KACCpD,GAAOI,GAAKA,EAAI,GAAM,IACtBL,GAAIK,GAAKA,EAAIA,KAEdiD,WAAUjD,GAAK+C,QAAQG,IAAIlD,KAwF9B,MAAMmD,EACL,YAAYjB,GACXkB,KAAKlB,MAAQA,EAEd,WACCR,SAASQ,MAAQkB,KAAKlB,MAEvB,iBACC,IAAImB,EAAaC,SAASC,SAASC,OAAO,GAAGC,OAAOjD,QAAQ,QAAS,IACrEkD,MAAML,EAAa,UAQJC,SAASC,SAASC,OAAO,GAAGC,OAAOjD,QAAQ,QAAS,KAEzD,IAAI2C,EAAK,4BACfQ,WAGN,MAAMC,EAAgB,CAClB,GAAM,8BACN,eAAgB,gBAChB,QAAW,qCAEf,GAAIA,GAAiBlC,SAASmC,eAAe,qBAAuB,CAChE,IAAIC,EAAoB,+BAExB,IAAI,IAAIjC,KADRiC,GAAqB,uCACNF,EACXE,GAAqB,4CAEjBA,GADM,MAAPjC,EACsB,qDAAuDA,EAAM,cAAgB+B,EAAc/B,GAAO,WAElG,qDAAuDA,EAAM,MAAQ+B,EAAc/B,GAAO,WAEnHiC,GAAqB,eAEzBA,GAAqB,SACrBpC,SAASmC,eAAe,qBAAqBrB,UAAYsB,EAG7DC,OAAOC,OAAS,KAEf,IAAIC,EAAUvC,SAASwC,iBAAiB,QACpCD,GACHA,EAAQE,SAASC,IAChBA,EAAEC,mBAAmB,YAAa,+CArI1BC,KAAKC,iBAAiBC,kBAAkBC,SAqImD,MACnGL,EAAEC,mBAAmB,YAAa,gDAAkDK,MAAMC,YAAYC,KAAO,MAC7GR,EAAEC,mBAAmB,YAAa,8FAI9B3C,SAASC,cAAc,2BACtBD,SAASC,cAAc,yBAAyBgB,MAAQ+B,MAAMC,YAAYC,MAE3ElD,SAASC,cAAc,oBACtBD,SAASC,cAAc,mBAAmB0C,mBAAmB,YAAa,+CAKjF,IAAInD,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,UAAY,GACvDC,EAAYC,OAAOC,KAAKP,GAAUb,OAEnCkB,GAAaG,SAASC,cAAc,2BACtCD,SAASC,cAAc,yBAAyBC,YAAcL,GAE/Db,MAAM,aACJC,MAAMC,GAAaA,EAASC,SAC5BF,MAAMG,IAEN,IAAIC,EAAQD,EAAKC,MACbC,EAAW,EAEf,IAAIa,KAAOX,EAAU,CACpB,IAAIY,EAAOf,EAAMc,GACdC,GAAQZ,EAAS2D,eAAehD,KAClCb,GAAYc,EAAKO,OAAOC,IAAMpB,EAASW,IAErCH,SAASC,cAAc,iBACzBD,SAASC,cAAc,gBAAgBe,aAAa,eAAe,KAAK5C,EAAYkB,SAItF,IAAIC,EAAO,yCACP6D,EAAUxB,SAASC,SAASC,OAAO,GAAGC,OAAOjD,QAAQ,QAAS,IAElE,IAAI,IAAIqB,KAAOd,EAAO,CAErB,GAAG+D,GAAWA,GAAW/D,EAAMc,GAAKE,QAA+B,IAAtBhB,EAAMc,GAAKkD,OAAiB,CACxE,IAAIC,EAAW,kCACdA,GAAY,kCACXA,GAAY,sBACXA,GAAY,8CAAgDjE,EAAMc,GAAKE,MAAQ,UAAYhB,EAAMc,GAAKoD,OAAO,GAAK,KAClHD,GAAY,0BAA4BjE,EAAMc,GAAKE,MAAQ,WAAahB,EAAMc,GAAKoD,OAAO,GAAK,mCAC/FD,GAAY,OACbA,GAAY,SACbA,GAAY,SACZA,GAAY,iCACXA,GAAY,4BACXA,GAAY,OAASjE,EAAMc,GAAKK,MAAQ,QACxC8C,GAAY,mCAAqCjE,EAAMc,GAAKO,YAAc,OAC1E4C,GAAY,yCAA2ClF,EAAYiB,EAAMc,GAAKQ,OAAOC,KAAO,YACzFvB,EAAMc,GAAKQ,OAAO6C,MACpBF,GAAY,2BAA6BlF,EAAYiB,EAAMc,GAAKQ,OAAO6C,KAAO,aAE/EF,GAAY,OACZA,GAAY,yFAA2FjE,EAAMc,GAAKM,GAAK,iBAAmBpB,EAAMc,GAAKQ,OAAOC,IAAM,sCAClK0C,GAAY,QAAUjE,EAAMc,GAAKsD,KAAO,SACzCH,GAAY,SACbA,GAAY,SACbA,GAAY,SACZtD,SAASC,cAAc,SAASa,UAAYwC,EAG7C,GAAGF,GAAW/D,EAAMc,GAAKE,QAA+B,IAAtBhB,EAAMc,GAAKkD,OAAiB,CAE7D,IAAIK,EAAiBrE,EAAMc,GAAKwD,WAC5BC,EAAoB,GACxB,GAAGF,EACF,IAAI,IAAIG,KAAmBH,EAC1BE,GAAqBC,EAAkB,IAIzCtE,GAAQ,oBAAsBqE,EAAkB7B,OAAS,KAEtD1C,EAAMc,GAAK2D,WACbvE,GAAQ,sCAAwCF,EAAMc,GAAK2D,SAAW,aAGnEzE,EAAMc,GAAK2D,UAAgC,WAApBzE,EAAMc,GAAK4D,QACrCxE,GAAQ,mCAAqCF,EAAMc,GAAK4D,MAAQ,UAG7D1E,EAAMc,GAAK2D,UAAiC,wBAApBzE,EAAMc,GAAK4D,OAAuD,wBAApB1E,EAAMc,GAAK4D,QACpFxE,GAAQ,yBAA2BF,EAAMc,GAAK4D,MAAQ,UAGnD1E,EAAMc,GAAKG,QAAQC,MAAM,GAC5BhB,GAAQ,uEAAyEF,EAAMc,GAAKM,GAAK,iBAAmBpB,EAAMc,GAAKE,MAAQ,KAEvId,GAAQ,0DAA4DF,EAAMc,GAAKM,GAAK,iBAAmBpB,EAAMc,GAAKE,MAAQ,KAExHhB,EAAMc,GAAKG,QAAQC,QACrBhB,GAAQ,0BAA4BF,EAAMc,GAAKE,MAAQ,WAAahB,EAAMc,GAAKG,QAAQC,MAAM,GAAK,UAAYlB,EAAMc,GAAKK,MAAQ,6BAC7HnB,EAAMc,GAAKG,QAAQC,MAAM,KAC5BhB,GAAQ,0BAA4BF,EAAMc,GAAKE,MAAQ,WAAahB,EAAMc,GAAKG,QAAQC,MAAM,GAAK,UAAYlB,EAAMc,GAAKK,MAAQ,8BAInIjB,GAAQ,SACRA,GAAQ,yDAA2DF,EAAMc,GAAKM,GAAK,iBAAmBpB,EAAMc,GAAKE,MAAQ,KACxHd,GAAQ,OAASF,EAAMc,GAAKK,MAAQ,QACpCjB,GAAQ,4BAA8BF,EAAMc,GAAK6D,SAAW,SAC5DzE,GAAQ,yCAA2CnB,EAAYiB,EAAMc,GAAKQ,OAAOC,KAAO,aACrFvB,EAAMc,GAAKQ,OAAO6C,MACpBjE,GAAQ,2BAA6BnB,EAAYiB,EAAMc,GAAKQ,OAAO6C,KAAO,aAE3EjE,GAAQ,OACTA,GAAQ,SACRA,GAAQ,8BACPA,GAAQ,qEAAuEF,EAAMc,GAAKM,GAAK,kBAAoBpB,EAAMc,GAAKQ,OAAOC,IAAM,uBAC3IrB,GAAQ,aAAeF,EAAMc,GAAKE,MAAQ,oEAAsEhB,EAAMc,GAAKM,GAAK,kBACjIlB,GAAQ,SACTA,GAAQ,UAITA,GAAQ,SACLS,SAASC,cAAc,cACzBD,SAASC,cAAc,YAAYa,UAAYvB,GAGhDS,SAASwC,iBAAiB,4BAA4BC,SAAUwB,IAC/DA,EAAIC,iBAAiB,SAAS,SAASxB,GAEtC,IAAIyB,EAAQC,EADZ1B,EAAE2B,iBAEFF,EAAStD,SAASa,KAAK4C,QAAQ7D,IAC/B2D,EAAW1C,KAAK6C,aAAa,SAAW7C,KAAK4C,QAAQE,KACjDJ,EAIHpF,MAAM,aACJC,MAAMC,GAAaA,EAASC,SAC5BF,MAAMG,IACN,IAAIC,EAAQD,EAAKC,MACbe,EAAOf,EAAM8E,GACjB,GAAG/D,IAAwB,IAAhBA,EAAKiD,OAAiB,CAChC,IAAI9D,EAAO,kCACVA,GAAQ,kCACPA,GAAQ,sBACPA,GAAQ,8CAAgDa,EAAKC,MAAQ,UAAYD,EAAKmD,OAAO,GAAK,KAClGhE,GAAQ,0BAA4Ba,EAAKC,MAAQ,WAAaD,EAAKmD,OAAO,GAAK,mCAC/EhE,GAAQ,OACTA,GAAQ,SACTA,GAAQ,SACRA,GAAQ,iCACPA,GAAQ,4BACPA,GAAQ,OAASa,EAAKI,MAAQ,QAC9BjB,GAAQ,mCAAqCa,EAAKM,YAAc,OAChEnB,GAAQ,yCAA2CnB,EAAYgC,EAAKO,OAAOC,KAAO,YAC/ER,EAAKO,OAAO6C,MACdjE,GAAQ,2BAA6BnB,EAAYgC,EAAKO,OAAO6C,KAAO,aAErEjE,GAAQ,OACRA,GAAQ,yFAA2Fa,EAAKK,GAAK,iBAAmBL,EAAKO,OAAOC,IAAM,sCAClJrB,GAAQ,MAAQa,EAAKqD,KAAO,OAC5BlE,GAAQ,kBAAoBa,EAAKC,MAAQ,yCAC1Cd,GAAQ,SACTA,GAAQ,SACTA,GAAQ,SAERA,GAAQ,kEAERA,GAAQ,wDACR,IAAI,IAAIY,KAAOd,EACVc,GAAOgE,GAA+B,GAArB9E,EAAMc,GAAKkD,SAE/B9D,GAAQ,qBAEHF,EAAMc,GAAKG,QAAQC,MAAM,GAC5BhB,GAAQ,iEAAmEF,EAAMc,GAAKM,GAAK,iBAAmBpB,EAAMc,GAAKE,MAAQ,KAEjId,GAAQ,mBAENF,EAAMc,GAAKG,QAAQC,QACrBhB,GAAQ,0BAA4BF,EAAMc,GAAKE,MAAQ,WAAahB,EAAMc,GAAKG,QAAQC,MAAM,GAAK,uBAAyBlB,EAAMc,GAAKK,MAAQ,6BAC1InB,EAAMc,GAAKG,QAAQC,MAAM,KAC5BhB,GAAQ,0BAA4BF,EAAMc,GAAKE,MAAQ,WAAahB,EAAMc,GAAKG,QAAQC,MAAM,GAAK,uBAAyBlB,EAAMc,GAAKK,MAAQ,8BAIhJjB,GAAQ,SACRA,GAAQ,yDAA2DF,EAAMc,GAAKM,GAAK,iBAAmBpB,EAAMc,GAAKE,MAAQ,KACxHd,GAAQ,OAASF,EAAMc,GAAKK,MAAQ,QACpCjB,GAAQ,0CAA4CF,EAAMc,GAAK6D,SAAW,SAC1EzE,GAAQ,yCAA2CnB,EAAYiB,EAAMc,GAAKQ,OAAOC,KAAO,qCAAuCxC,EAAYiB,EAAMc,GAAKQ,OAAO6C,KAAO,iBACrKjE,GAAQ,SACRA,GAAQ,8BACPA,GAAQ,2EAA6EF,EAAMc,GAAKM,GAAK,iBAAmBpB,EAAMc,GAAKQ,OAAOC,IAAM,uBACjJrB,GAAQ,SACTA,GAAQ,UAIVA,GAAQ,SAERS,SAASC,cAAc,iCAAiCa,UAAYvB,EAClDkF,IAAI,CACrBC,UAAW,iBACXC,OAAQ,EACRC,MAAO,EACPC,QAAS,OACTC,iBAAkB,SAClBC,aAAc,CACb,oCACA,sCAEDC,KAAK,EACLC,YAAa,SACbC,MAAO,IACPC,UAAU,EACVC,gBAAiB,KACjBC,MAAM,EACNC,WAAW,CACVC,EAAE,CAACX,MAAM,EAAEI,KAAI,GACfQ,IAAI,CAACZ,MAAM,EAAEI,KAAI,GACjBS,IAAI,CAACb,MAAO,GACZc,IAAI,CAACd,MAAO,IAEbe,UAAU,IAGXC,EAAE,qBAAqBC,MAAM,YAE5B1E,OAAMC,IAAUC,QAAQG,IAAI,iBAAkBJ,MAhGlDiB,OAAOT,SAASkE,KAAO1B,WAsGlBjD,OAAMC,IAAUC,QAAQD,MAAM,iBAAkBA,MAG1D,MAAM2E,EAAgB/F,SAASC,cAAc,gBACvC8F,IACCA,EAAcC,QAAU,KACpBjH,IACA6G,EAAE,cAAcC,MAAM,SAE1BE,EAAcE,cAAgB,KACnB,GAIlB,MAAMC,EAAe,CACpBtB,MAAO,CACN,CAACuB,OAAQ,EAAG1C,KAAM,sFAClB,CAAC0C,OAAQ,EAAG1C,KAAM,wCAClB,CAAC0C,OAAQ,EAAG1C,KAAM,0CAEnB,eACC,IAAIlE,EAAO,gEACX,IAAI,IAAI6G,KAAQ1E,KAAKkD,MAAO,CAC3B,IAAKuB,OAAQE,EAAY5C,KAAM6C,GAAYF,EAC3C7G,GAAQ,0MAKK8G,0GAGJC,oFAOV,OADA/G,GAAQ,eACDA,IAIHgH,EAAavG,SAASC,cAAc,aACvCsG,IACFA,EAAWzF,UAAYoF,EAAaM,gBAIrC,MAAMC,EAAczG,SAASwC,iBAAiB,gBAC3CiE,GACFA,EAAYhE,SAAQ,SAAS+B,GAC5BA,EAAKN,iBAAiB,SAAS,SAASxB,GACvCA,EAAE2B,iBACFrE,SAASwC,iBAAiB,cAAcC,SAAQiE,GAAMA,EAAGC,UAAUC,OAAO,YAC1ElF,KAAKmF,cAAcF,UAAUG,IAAI,UACjC,IAAIC,EAAgBrF,KAAK6C,aAAa,QAAQyC,MAAM,IAAMtF,KAAK6C,aAAa,eACvD,OAAjBwC,GACH/G,SAASwC,iBAAiB,mBAAmBC,SAASwE,IACrDA,EAAGC,MAAMC,QAAU,UAEpBnH,SAASwC,iBAAiB,mBAAqBuE,GAAetE,SAASwE,IACtEA,EAAGC,MAAMC,QAAU,YAGpBnH,SAASwC,iBAAiB,mBAAmBC,SAASwE,IACrDA,EAAGC,MAAMC,QAAU,kBAUR,IAAIC,eAAe,6BAA8B,CACjEC,WAAY,OACZC,SAAS,EACTC,SAAS,EACTvC,KAAK,EACLwC,QAAS,CAAC,IAAI,KACdC,UAAU,EACVC,gBAAiB,MACjBC,YAAa,SAIX3H,SAASC,cAAc,sBACZwE,IAAI,CAChBC,UAAW,oBACXC,OAAQ,GACRiD,YAAa,EACbhD,MAAO,EACPC,QAAS,OACTC,iBAAkB,SAClBC,aAAc,CACb,oCACA,sCAEDC,KAAK,EACLC,YAAa,SACbC,MAAO,IACPC,UAAU,EACVC,gBAAiB,KACjBC,MAAM,EACNC,WAAW,CACVC,EAAE,CAACX,MAAM,EAAEI,KAAI,GACfQ,IAAI,CAACZ,MAAM,EAAEI,KAAI,GACjBS,IAAI,CAACb,MAAO,GACZc,IAAI,CAACd,MAAO,IAEbe,UAAU,IAKT3F,SAAS6H,MAAQ7H,SAASwC,iBAAiB,eAC7CxC,SAAS6H,KAAK3D,iBAAiB,SAAS,SAAUxB,GACjD,GAAIA,EAAEoF,QAAUpF,EAAEoF,OAAOnB,UAAUoB,SAAS,aAAc,CACzDrF,EAAEoF,OAAOE,UAAW,EACpB,IAAI7D,EAAStD,SAAS6B,EAAEoF,OAAOxD,QAAQ7D,IACnCwH,EAAQC,WAAWxF,EAAEoF,OAAOxD,QAAQ2D,OACxC,GAAG9D,EAAQ,CACV,IAAI3E,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,UAAY,GACxDJ,EAAS2D,eAAegB,GAC1B3E,EAAS2E,IAAW,EAEpB3E,EAAS2E,GAAU,EAEpBxE,aAAawI,QAAQ,OAAQ1I,KAAKyB,UAAU1B,IAE7CT,IACA6G,EAAE,cAAcC,MAAM,QAEJ,oBAAPuC,KACVA,IAAI,QAAQ,YAAY,CACvBnH,MAAOgH,EACPI,SAAU,MACVC,aAAc,UACdC,YAAahK,OAAO4F,KAGtBzB,EAAEoF,OAAOE,UAAW,EACpB3G,QAAQmH,YAMRxI,SAAS6H,MAAQ7H,SAASwC,iBAAiB,2BAC7CxC,SAAS6H,KAAK3D,iBAAiB,SAAS,SAAUxB,GACjD,GAAIA,EAAEoF,QAAUpF,EAAEoF,OAAOnB,UAAUoB,SAAS,yBAA0B,CACrE,IAAIU,EAAqBC,MAAMC,KAAKjG,EAAEoF,OAAOc,WAAWC,UAAU3K,QAAQ4K,GAAUA,IAAUpG,EAAEoF,QAA2B,SAAjBgB,EAAMC,UAChH,GAAGN,EAAoB,CACtB,IAAIO,EAAWnI,SAAS4H,EAAmB,GAAGxH,MAAMc,QAASkH,EAAS,EAClE9E,EAASsE,EAAmB,GAAGnE,QAAQ7D,GAU3C,GARCwI,EAD2B,MAAxBvG,EAAEoF,OAAOxD,QAAQ4E,IACXrI,SAASmI,GAAY,EAE1BA,GAAY,EACNnI,SAASmI,GAAY,EAErB,EAGRA,GAAY,GAAe,GAAVC,EACnBjJ,SAASC,cAAc,+BAAiCkE,EAAS,MAAMgF,YACjE,CACNV,EAAmB,GAAGxH,MAAQgI,EAC9B,IAAIzJ,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,UAAY,GAC3DJ,EAAS2E,GAAU8E,EACnBtJ,aAAawI,QAAQ,OAAQ1I,KAAKyB,UAAU1B,IAC5CT,UAQFiB,SAAS6H,MAAQ7H,SAASwC,iBAAiB,uBAC7CxC,SAAS6H,KAAK3D,iBAAiB,SAAS,SAAUxB,GACjD,GAAIA,EAAEoF,QAAUpF,EAAEoF,OAAOnB,UAAUoB,SAAS,qBAAsB,CAGjE,GAFArF,EAAEoF,OAAO9G,aAAa,WAAY,YAErB,GADAqB,OAAO+G,QAAQ,mDACT,CAClB,IAAIjF,EAAStD,SAAS6B,EAAEoF,OAAOxD,QAAQ7D,IACvC,GAAG0D,EAAQ,CACV,IAAI3E,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,UAAY,UACpDJ,EAAS2E,GAChBxE,aAAawI,QAAQ,OAAQ1I,KAAKyB,UAAU1B,IAC5CT,IACA6G,EAAE,cAAcC,MAAM,SAGxBnD,EAAEoF,OAAOuB,gBAAgB,gBAMzBrJ,SAASC,cAAc,+BACzBD,SAASC,cAAc,6BAA6B+F,QAAU,KAC7DJ,EAAE,qBAAqBC,MAAM,UAO/B,MAAMyD,EAAatJ,SAASwC,iBAAiB,SACvC+G,EAAW,IAAIC,sBAAqBjG,IACzCA,EAAOd,SAAQgH,IACXA,EAAMC,kBAAoB,IAC5BD,EAAM3B,OAAO6B,IAAMF,EAAM3B,OAAOvD,aAAa,kBAG7C,CACFqF,KAAM,KACNC,WAAY,MACZC,UAAW,KAEZR,EAAW7G,SAAQgH,IAClBF,EAASQ,QAAQN,MAIlB,IAAIO,EAAmBhK,SAASiK,uBAAuB,mBACvD,GAAGD,EACF,IAAI,IAAIxF,KAAQwF,EACfxF,EAAKwB,QAAU,SAAStD,GACvBA,EAAE2B,iBACF,IAAIyD,EAASpF,EAAEoF,OAAOxD,QAAQwD,QAAUpG,KAAK6C,aAAa,QACvDuD,GAOFlC,EAAE,cAAcsE,QAAQ,CAAEC,UAAWvE,EAAEkC,GAAQsC,SAASC,KAAO,MAMnE,IAAIC,EAAUzJ,YAxlBV0J,GADIA,EAAIlI,OAAOT,SAAS4I,QAClBC,MAAM,IAAIC,OAAOvK,wBACZoK,EAAE,IAHjB,IACQA,EA0lBLD,GACY,IAAIK,SAAS,CAACC,EAASC,KACpC,IAAIC,EAAU,IAAIC,eAClBD,EAAQE,KAAK,MAAO,sBAAwBV,GAAS,GACrDQ,EAAQxI,OAAS,WAChB,GAAIZ,KAAK2B,QAAU,KAAO3B,KAAK2B,OAAS,IAAK,CAE5C,IAAIjE,EAAOK,KAAKC,MAAMgC,KAAKxC,UAC3B0L,EAAQxL,GACR,IAAIgE,EAAUxB,SAASC,SAASE,OAAOD,OAAO,GAY9C,GAVc,UAAXsB,IACFpD,SAASmC,eAAe,kBAAkBlB,MAAQ7B,EAAKqB,GACxC,UAAX2C,GACHpD,SAASmC,eAAe,sBAAsBlB,MAAQ,wBAA0B7B,EAAKqB,GACrFT,SAASmC,eAAe,cAAclB,MAAQ7B,EAAK6L,SAASC,OAE5DlL,SAASmC,eAAe,sBAAsBlB,MAAQ,kBAAoB7B,EAAKqB,GAC/ET,SAASmC,eAAe,cAAclB,MAAQ7B,EAAK+L,MAGjDnL,SAASmC,eAAe,kBAAoB,CAE/C,IAAI5C,EAAO,2BAoBV,GAlBAA,GAAQ,QACPA,GAAQ,0BACRA,GAAQ,OACPA,GAAQ,OACPA,GAAQ,6BACRA,GAAQ,UAAYH,EAAKqB,GAAK,UAC/BlB,GAAQ,QACRA,GAAQ,OACPA,GAAQ,gCACRA,GAAQ,SAAWH,EAAKgM,SAAW,UACpC7L,GAAQ,QAKTA,GAAQ,QACTA,GAAQ,SAELH,EAAKwF,MAAO,CACdrF,GAAQ,QACPA,GAAQ,0BACPA,GAAQ,OACP,IAAI,IAAI8L,EAAI,EAAGA,EAAIjM,EAAKwF,MAAMjG,OAAQ0M,IACrC9L,GAAQ,OACPA,GAAQ,SAAWH,EAAKwF,MAAMyG,GAAG7K,MAAQ,QAAUpB,EAAKwF,MAAMyG,GAAGvH,SAAW,MAAQ1E,EAAKwF,MAAMyG,GAAGC,cAAgB,aAClH/L,GAAQ,SAAWH,EAAKwF,MAAMyG,GAAGvH,SAAW1E,EAAKwF,MAAMyG,GAAGC,cAAgB,eAC3E/L,GAAQ,QAETA,GAAQ,OACPA,GAAQ,qBAAuBH,EAAK6L,SAASC,KAAO,cACrD3L,GAAQ,QACRA,GAAQ,OACPA,GAAQ,4BACRA,GAAQ,SAAWH,EAAK+L,IAAM,eAC/B5L,GAAQ,QAETA,GAAQ,QACVA,GAAQ,SAGTA,GAAQ,QACPA,GAAQ,2BACRA,GAAQ,MAAQH,EAAK6L,SAASM,YAAc,OAC7ChM,GAAQ,SACTA,GAAQ,SAERS,SAASmC,eAAe,kBAAkBrB,UAAYvB,KAOzDuL,EAAQU,QAAU,KAEjBnK,QAAQD,MAAM,yBAGf0J,EAAQW,UAIRxM,MAAMG,GACCA,EAAKsM,aAEZzM,MAAM0M,IACNtK,QAAQG,IAAI,mBAAoBmK,MAEhCxK,OAAOC,IACPC,QAAQG,IAAIJ,MAKXpB,SAASC,cAAc,qBACzBD,SAASC,cAAc,oBAAoBiE,iBAAiB,UAAU,SAASxB,GAE9E,IAAIpD,EAAW4I,WAAWlI,SAASC,cAAc,mBAAmBqE,QAAQsH,UAC7D5L,SAASC,cAAc,qCAAqCgB,MAE3EmH,IAAI,QAAS,WAAY,CACxBnH,MAAO3B,EACP+I,SAAU,MACVC,aAAc,YAIftI,SAASC,cAAc,mBAAmB+H,UAAW,KAKvD,IAAI6D,EAAiB7L,SAASC,cAAc,mBACxC6L,EAAc9L,SAAS+L,gBAgBxBF,IACFA,EAAe3H,iBAAiB,SARjC,SAAqBxB,GACpBA,EAAE2B,iBACFyH,EAAYE,SAAS,CACpB3B,IAAK,EACL4B,SAAU,cAKXjM,SAASkE,iBAAiB,UAjB3B,WACC,IAAIgI,EAAcJ,EAAYK,aAAeL,EAAYM,aACpDN,EAAY3B,UAAY+B,EAAgB,GAC5CL,EAAe3E,MAAMC,QAAU,QAE/B0E,EAAe3E,MAAMC,QAAU,WAgBjCnH,SAASwC,iBAAiB,YAAYC,SAAS4J,IAC9CrN,MAAMqN,EAAI/H,QAAQgI,MAAMrN,MAAKsN,GACrBA,EAAI9I,SACTxE,MAAKG,IACPiN,EAAIvL,UAAY1B,QAIlB,IAAIoN,EAAkBxM,SAASmC,eAAe,iBAC3CqK,IACFA,EAAgBC,WAAa,SAASC,GACrC,GAAKA,EAAMC,SAAW,IAAMD,EAAMC,SAAW,IAAOjL,KAAKT,MAAMtC,OAAS,IACvE,OAAO,IAMV,MAAMiO,EAAY5M,SAASwC,iBAAiB,qBACzCoK,GACFA,EAAUnK,SAASoK,IACPC,MAAMD,EAAO,CACvBE,KAAM,sBACNC,YAAa,CACZ,IAAK,WAENC,MAAM,EACNC,gBAAiB,SAKpBlN,SAASkE,iBAAiB,oBAAoB,WAC7C,GAAGzB,QAAQ0K,KAAKnN,SAASwC,iBAAiB,0BAA0B,SAASyE,GAC5EA,EAAG/C,iBAAiB,SAAS,WAC5BlE,SAASwC,iBAAiB,yBAAyBC,SAASC,IAC3DA,EAAEiE,UAAUC,OAAO,aAEpB,IAAIwG,EAAM1L,KAAK4C,QAAQ+I,MACvB3L,KAAKiF,UAAUG,IAAI,UACnB9G,SAASC,cAAc,kBAAkBe,aAAa,MAAM,0BAA4BoM,EAAM,iBAK1EpN,SAASmC,eAAe,kBACtBnC,SAASmC,eAAe,oBADjD,IAUImL,EAAkBtN,SAASuN,kBAAkB,YACjD,GAAGD,EACC,IAAI,IAAIE,KAAkBF,EACtBE,EAAeC,SAAW,WACJ,MAAd/L,KAAKT,MACLjB,SAASmC,eAAe,oBAAoB+E,MAAMC,QAAU,QAE5DnH,SAASmC,eAAe,oBAAoB+E,MAAMC,QAAU,QAK5E,GAAGnH,SAASmC,eAAe,iBAAkB,CAC5C,MACMuL,GADM,IAAIC,MACKC,cACfC,EAAkB7N,SAASmC,eAAe,iBAChD0L,EAAgB3G,MAAM4G,MAAQ,QAC9BD,EAAgB/M,UAAY4M,EAE1B1N,SAASmC,eAAe,oBACHnC,SAASmC,eAAe,kBAC9B0E,cAAcK,MAAMC,QAAU,S","file":"bundle.js","sourcesContent":["/*import * as $ from 'jquery';*/\r\n//import './simplelightbox/simple-lightbox.min.js';\r\n//import './imask.min.js';\r\n\r\nconst { range } = rxjs;\r\nconst { map, filter } = rxjs.operators;\r\n \r\nrange(1, 20)\r\n  .pipe(\r\n    filter(x => x % 2 === 1),\r\n    map(x => x + x)\r\n  )\r\n  .subscribe(x => console.log(x));\r\n\r\n\"use strict\";\r\nfunction getTimeZone() {\r\n    return Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n}\r\n\r\nfunction moneyFormat(int){\r\n    let str = String(int);\r\n    let x = str.split('.');\r\n    let x1 = x[0];\r\n    let x2 = x.length > 1 ? '.' + x[1] : '';\r\n    let rgx = /(\\d+)(\\d{3})/;\r\n    while (rgx.test(x1)) {\r\n        x1 = x1.replace(rgx, '$1' + ' ' + '$2');\r\n    }\r\n    return x1 + x2;\r\n}\r\n\r\nfunction $_GET(key) {\r\n    var s = window.location.search;\r\n    s = s.match(new RegExp(key + '=([^&=]+)'));\r\n    return s ? s[1] : false;\r\n}\r\n\r\nfunction generateModalCart() {\r\n\r\n\tfetch('data.json')\r\n\t\t.then( response =>  response.json())\r\n\t\t.then( data => {\r\n            let goods = data.goods;\r\n\t\t\tlet totalSum = 0;\r\n\t\t\t\r\n\t\t\tlet html = '<tbody>';\r\n\t\t\tlet cartData = JSON.parse(localStorage.getItem('cart'));\r\n\t\t\tlet cartCount = Object.keys(cartData).length;\r\n\t\t\t\r\n\t\t\tdocument.querySelector('.btnOpenCart .counter').textContent = cartCount ? cartCount : 0;\r\n\t\t\t\r\n\t\t\tif(cartCount) {\r\n\t\t\t\t\r\n\t\t\t\tfor(key in cartData) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet good = goods[key];\r\n\t\t\t\t\tif(good) {\r\n\t\t\t\t\t\thtml += '<tr>';\r\n\t\t\t\t\t\thtml += '<td data-label=\"Picture\"><img src=\"upload/goods/' + good.alias + '/medium/' + good.preview.photo[0] + '\" width=\"70\" alt=\"\"></td>';\r\n\t\t\t\t\t\thtml += '<td data-label=\"Name\">';\r\n\t\t\t\t\t\thtml += '<h4>' + good.title + '<button type=\"button\" class=\"btnDeleteCartGood ui float right\" data-id=\"' + good.id + '\" title=\"Удалить\"><i class=\"icon x\"></i></button></h4><p class=\"vendor_code\">' + good.vendor_code + '</p>';\r\n\t\t\t\t\t\thtml += '<div class=\"visible-sm\">';\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\thtml += '<div class=\"ui input number-spinner\">';\r\n\t\t\t\t\t\t\t\thtml += '<button type=\"button\" class=\"number-spinner-button\" data-dir=\"down\"><i class=\"icon minus\"></i></button>';\r\n\t\t\t\t\t\t\t\thtml += '<input type=\"text\" value=\"' + cartData[key] + '\" data-id=\"' + good.id + '\">';\r\n\t\t\t\t\t\t\t\thtml += '<button type=\"button\" class=\"number-spinner-button\" data-dir=\"up\"><i class=\"icon plus\"></i></button>';\r\n\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\thtml += '<div><p class=\"price\">' + moneyFormat(good.prices.new) + ' р.</p></div>';\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\thtml += '</td>';\r\n\t\t\t\t\t\thtml += '<td data-label=\"Qty\">';\r\n\t\t\t\t\t\t\thtml += '<div class=\"ui input number-spinner\">';\r\n\t\t\t\t\t\t\t\thtml += '<button type=\"button\" class=\"number-spinner-button\" data-dir=\"down\"><i class=\"icon minus\"></i></button>';\r\n\t\t\t\t\t\t\t\thtml += '<input type=\"text\" value=\"' + cartData[key] + '\" data-id=\"' + good.id + '\">';\r\n\t\t\t\t\t\t\t\thtml += '<button type=\"button\" class=\"number-spinner-button\" data-dir=\"up\"><i class=\"icon plus\"></i></button>';\r\n\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\thtml += '</td>';\r\n\t\t\t\t\t\thtml += '<td data-label=\"Price\"><p class=\"price\">' + moneyFormat(good.prices.new) + ' р.</p></td>';\r\n\t\t\t\t\t\thtml += '<td data-label=\"Action\"><button type=\"button\" class=\"btnDeleteCartGood\" data-id=\"' + good.id + '\" title=\"Удалить\"><i class=\"icon x\"></i></button></td>';\r\n\t\t\t\t\t\thtml += '</tr>';\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttotalSum += parseInt(good.prices.new) * cartData[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\thtml += '<tr><td colspan=\"5\">Товаров в корзине нет</td></tr>';\t\t\t\t\r\n\t\t\t}\r\n\t\t\thtml += '</tbody>';\r\n\t\t\tdocument.querySelector('#cartModalTable').innerHTML = html;\r\n\t\t\tdocument.querySelector('#totalSum').innerText = moneyFormat(totalSum);\r\n\t\t\tdocument.querySelector('#submitCartForm').setAttribute('data-totalsum',totalSum);\r\n\t\t\tdocument.querySelector('.btnOpenCart').setAttribute('data-tooltip','= ' + moneyFormat(totalSum) + ' р.');\r\n\t\t\tdocument.querySelector('#cartModal form input[name=goods]').value = JSON.stringify(cartData);\r\n\r\n\t\t}).catch(error => {console.error('Request failed', error);});\r\n}\r\n\r\nclass Page {\r\n\tconstructor(title) {\r\n\t\tthis.title = title;\r\n\t}\r\n\tsetTitle() {\r\n\t\tdocument.title = this.title;\r\n\t}\r\n\tstatic getPage() {\r\n\t\tlet currentUrl = location.pathname.substr(1).trim().replace('.html', '');\r\n\t\talert(currentUrl + ' test');\r\n\t}\r\n}\r\nclass goodPage extends Page {\r\n\tconstructor(title) {\r\n\t\tthis.title = title + ' | Гигантские раскраски ilo';\r\n\t}\r\n}\r\nlet currentUrl = location.pathname.substr(1).trim().replace('.html', '');\r\nif(!currentUrl) {\r\n\tlet page = new Page('Гигантские раскраски ilo');\r\n\tpage.setTitle();\r\n}\r\n\r\nconst deliveryTypes = {\r\n    \"sd\": \"Самовывоз (Санкт-Петербург)\",\r\n    \"russian-post\": \"Почтой России\",\r\n    \"courier\": \"Бесконтактная курьерская доставка\"\r\n}\r\nif( deliveryTypes && document.getElementById('deliveryTypesForm') ) {\r\n    let deliveryTypesHtml = '<div class=\"grouped fields\">';\r\n    deliveryTypesHtml += '<label>Выберите тип доставки</label>'\r\n    for(var key in deliveryTypes) {\r\n        deliveryTypesHtml += '<div class=\"field\"><div class=\"ui radio\">';\r\n        if(key == 'sd') {\r\n            deliveryTypesHtml += '<label><input type=\"radio\" name=\"delivery\" value=\"' + key + '\" checked> ' + deliveryTypes[key] + '</label>';\r\n        } else {\r\n            deliveryTypesHtml += '<label><input type=\"radio\" name=\"delivery\" value=\"' + key + '\"> ' + deliveryTypes[key] + '</label>';   \r\n        }\r\n        deliveryTypesHtml += '</div></div>';\r\n    }\r\n    deliveryTypesHtml += '</div>'\r\n    document.getElementById('deliveryTypesForm').innerHTML = deliveryTypesHtml;\r\n}\r\n\r\nwindow.onload = () => {\r\n\r\n\tlet formEls = document.querySelectorAll('form')\r\n\tif( formEls ) {\r\n\t\tformEls.forEach((e) => {\r\n\t\t\te.insertAdjacentHTML('beforeEnd', '<input type=\"hidden\" name=\"timezone\" value=\"' + getTimeZone() + '\">');\r\n\t\t\te.insertAdjacentHTML('beforeEnd', '<input type=\"hidden\" name=\"user_city\" value=\"' + ymaps.geolocation.city + '\">');\r\n\t\t\te.insertAdjacentHTML('beforeEnd', '<input type=\"hidden\" name=\"g-recaptcha-response\" class=\"g-recaptcha-response\" value=\"\">');\r\n\t\t});\r\n\t}\r\n\r\n    if(document.querySelector('form input[name=city]')) {\r\n        document.querySelector('form input[name=city]').value = ymaps.geolocation.city;\r\n    }\r\n    if(document.querySelector('#cartModal form')) {\r\n        document.querySelector('#cartModal form').insertAdjacentHTML('beforeEnd', '<input type=\"hidden\" name=\"goods\" value=\"\">');\r\n\t}\r\n\t\r\n\t// Кнопка вызова миникорзины\r\n\t//localStorage.clear();\r\n\tlet cartData = JSON.parse(localStorage.getItem('cart')) || {};\r\n\tlet cartCount = Object.keys(cartData).length;\r\n\r\n\tif(cartCount && document.querySelector('.btnOpenCart .counter')) {\r\n\t\tdocument.querySelector('.btnOpenCart .counter').textContent = cartCount;\r\n\t}\r\n\tfetch('data.json')\r\n\t\t.then( response =>  response.json())\r\n\t\t.then( data => {\r\n\r\n\t\t\tlet goods = data.goods;\r\n\t\t\tlet totalSum = 0;\r\n\t\t\t\r\n\t\t\tfor(key in cartData) {\r\n\t\t\t\tlet good = goods[key];\r\n\t\t\t\tif(good && cartData.hasOwnProperty(key) ) {\r\n\t\t\t\t\ttotalSum += good.prices.new * cartData[key];\r\n\t\t\t\t}\r\n\t\t\t\tif(document.querySelector('.btnOpenCart')) {\r\n\t\t\t\t\tdocument.querySelector('.btnOpenCart').setAttribute('data-tooltip',`= ${moneyFormat(totalSum)} р.`);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tlet html = '<div class=\"ui three stackable cards\">';\r\n\t\t\tlet goodUrl = location.pathname.substr(1).trim().replace('.html', '');\r\n\t\t\t\r\n\t\t\tfor(var key in goods) {\r\n\t\t\t\t\r\n\t\t\t\tif(goodUrl && goodUrl == goods[key].alias && goods[key].status === true) {\r\n\t\t\t\t\tlet goodHtml = '<div class=\"ui stackable grid\">';\r\n\t\t\t\t\t\tgoodHtml += '<div class=\"seven wide column\">';\r\n\t\t\t\t\t\t\tgoodHtml += '<div class=\"image\">';\r\n\t\t\t\t\t\t\t\tgoodHtml += '<a data-lightbox=\"good\" href=\"upload/goods/' + goods[key].alias + '/large/' + goods[key].images[0] + '\">';\r\n\t\t\t\t\t\t\t\tgoodHtml += '<img src=\"upload/goods/' + goods[key].alias + '/medium/' + goods[key].images[0] + '\" class=\"ui fluid image\" alt=\"\">';\r\n\t\t\t\t\t\t\t\tgoodHtml += '</a>';\r\n\t\t\t\t\t\t\tgoodHtml += '</div>';\r\n\t\t\t\t\t\tgoodHtml += '</div>'\r\n\t\t\t\t\t\tgoodHtml += '<div class=\"nine wide column\">';\r\n\t\t\t\t\t\t\tgoodHtml += '<div class=\"description\">';\r\n\t\t\t\t\t\t\t\tgoodHtml += '<h4>' + goods[key].title + '</h4>';\r\n\t\t\t\t\t\t\t\tgoodHtml += '<p class=\"vendor_code\">Артикул: ' + goods[key].vendor_code + '</p>';\r\n\t\t\t\t\t\t\t\tgoodHtml += '<p class=\"prices\"><span class=\"price\">' + moneyFormat(goods[key].prices.new) + 'р.</span>';\r\n\t\t\t\t\t\t\t\tif(goods[key].prices.old) {\r\n\t\t\t\t\t\t\t\t\tgoodHtml += ' <span class=\"oldprice\">' + moneyFormat(goods[key].prices.old) + 'р.</span>';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tgoodHtml += '</p>';\r\n\t\t\t\t\t\t\t\tgoodHtml += '<div style=\"margin-bottom: 20px;\"><button class=\"ui yellow button addToCart\" data-id=\"' + goods[key].id + '\" data-price=\"' + goods[key].prices.new + '\">Добавить в корзину</button></div>';\r\n\t\t\t\t\t\t\t\tgoodHtml += '<div>' + goods[key].text + '</div>';\r\n\t\t\t\t\t\t\tgoodHtml += '</div>';\r\n\t\t\t\t\t\tgoodHtml += '</div>';\r\n\t\t\t\t\tgoodHtml += '</div>';\r\n\t\t\t\t\tdocument.querySelector('#good').innerHTML = goodHtml;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(goodUrl != goods[key].alias && goods[key].status === true) {\r\n\r\n\t\t\t\t\tlet goodCategories = goods[key].categories;\r\n\t\t\t\t\tlet goodCategoriesStr = '';\r\n\t\t\t\t\tif(goodCategories) {\r\n\t\t\t\t\t\tfor(let goodCategoryKey in goodCategories) {\r\n\t\t\t\t\t\t\tgoodCategoriesStr += goodCategoryKey + ' ';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thtml += '<div class=\"card ' + goodCategoriesStr.trim() + '\">';\r\n\r\n\t\t\t\t\tif(goods[key].quantity) {\r\n\t\t\t\t\t\thtml += '<div class=\"ui label\">Осталось<br> ' + goods[key].quantity + ' шт</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!goods[key].quantity && goods[key].label == 'Новинка') {\r\n\t\t\t\t\t\thtml += '<div class=\"ui label label-new\">' + goods[key].label + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!goods[key].quantity && (goods[key].label == 'Выгоднее<br>на 1000р' || goods[key].label == 'Выгоднее<br>на 2000р')) {\r\n\t\t\t\t\t\thtml += '<div class=\"ui label\">' + goods[key].label + '</div>';\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\tif( goods[key].preview.photo[1] ) {\r\n\t\t\t\t\t\thtml += '<div class=\"ui slide image reveal btnOpenGoodDetailsModal\" data-id=\"' + goods[key].id + '\" data-link=\"/' + goods[key].alias + '\">';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thtml += '<div class=\"ui image btnOpenGoodDetailsModal\" data-id=\"' + goods[key].id + '\" data-link=\"/' + goods[key].alias + '\">';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(goods[key].preview.photo) {\r\n\t\t\t\t\t\thtml += '<img src=\"upload/goods/' + goods[key].alias + '/medium/' + goods[key].preview.photo[0] + '\" alt=\"' + goods[key].title + '\" class=\"visible content\">';\r\n\t\t\t\t\t\tif( goods[key].preview.photo[1] ) {\r\n\t\t\t\t\t\t\thtml += '<img src=\"upload/goods/' + goods[key].alias + '/medium/' + goods[key].preview.photo[1] + '\" alt=\"' + goods[key].title + '\" class=\"hidden content\">';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\thtml += '<div class=\"content btnOpenGoodDetailsModal\" data-id=\"' + goods[key].id + '\" data-link=\"/' + goods[key].alias + '\">';\r\n\t\t\t\t\t\thtml += '<h3>' + goods[key].title + '</h3>';\r\n\t\t\t\t\t\thtml += '<div class=\"description\">' + goods[key].subtitle + '</div>';\r\n\t\t\t\t\t\thtml += '<p class=\"prices\"><span class=\"price\">' + moneyFormat(goods[key].prices.new) + ' р.</span>';\r\n\t\t\t\t\t\tif(goods[key].prices.old) {\r\n\t\t\t\t\t\t\thtml += ' <span class=\"oldprice\">' + moneyFormat(goods[key].prices.old) + 'р.</span>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml += '</p>';\r\n\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\thtml += '<div class=\"inline center\">';\r\n\t\t\t\t\t\thtml += '<button type=\"button\" class=\"ui yellow button addToCart\" data-id=\"' + goods[key].id + ' \" data-price=\"' + goods[key].prices.new + '\">В корзину</button>';\r\n\t\t\t\t\t\thtml += '<a href=\"/' + goods[key].alias + '\" class=\"ui basic black button btnOpenGoodDetailsModal\" data-id=\"' + goods[key].id + '\">Подробнее</a>';\r\n\t\t\t\t\thtml += '</div>'\r\n\t\t\t\thtml += '</div>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\thtml += '</div>';\r\n\t\t\tif(document.querySelector('#catalog')) {\r\n\t\t\t\tdocument.querySelector('#catalog').innerHTML = html;\r\n\t\t\t}\r\n\r\n\t\t\tdocument.querySelectorAll('.btnOpenGoodDetailsModal').forEach( (btn) => {\r\n\t\t\t\tbtn.addEventListener('click', function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tlet goodId, goodLink;\r\n\t\t\t\t\tgoodId = parseInt(this.dataset.id);\r\n\t\t\t\t\tgoodLink = this.getAttribute('href') || this.dataset.link;\r\n\t\t\t\t\tif(!goodLink) {\r\n\t\t\t\t\t\twindow.location.href = goodLink;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfetch('data.json')\r\n\t\t\t\t\t\t\t.then( response =>  response.json())\r\n\t\t\t\t\t\t\t.then( data => {\r\n\t\t\t\t\t\t\t\tlet goods = data.goods;\r\n\t\t\t\t\t\t\t\tlet good = goods[goodId];\r\n\t\t\t\t\t\t\t\tif(good && good.status === true) {\r\n\t\t\t\t\t\t\t\t\tlet html = '<div class=\"ui stackable grid\">';\r\n\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"seven wide column\">';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"image\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<a data-lightbox=\"good\" href=\"upload/goods/' + good.alias + '/large/' + good.images[0] + '\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<img src=\"upload/goods/' + good.alias + '/medium/' + good.images[0] + '\" class=\"ui fluid image\" alt=\"\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '</a>';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\t\t\thtml += '</div>'\r\n\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"nine wide column\">';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"description\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<h4>' + good.title + '</h4>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<p class=\"vendor_code\">Артикул: ' + good.vendor_code + '</p>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<p class=\"prices\"><span class=\"price\">' + moneyFormat(good.prices.new) + 'р.</span>';\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(good.prices.old) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += ' <span class=\"oldprice\">' + moneyFormat(good.prices.old) + 'р.</span>';\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '</p>'\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<div style=\"margin-bottom: 20px;\"><button class=\"ui yellow button addToCart\" data-id=\"' + good.id + '\" data-price=\"' + good.prices.new + '\">Добавить в корзину</button></div>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<p>' + good.text + '</p>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<div><a href=\"/' + good.alias + '\">Перейти на страницу товара</a></div>';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\thtml += '<h2 style=\"margin-bottom: 20px;\">Вас может заинтересовать:</h2>';\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\thtml += '<div class=\"tiny-slider ui cards\" id=\"goodsCarousel\">';\r\n\t\t\t\t\t\t\t\t\tfor(let key in goods) {\r\n\t\t\t\t\t\t\t\t\t\tif( key != goodId && goods[key].status == true) {\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"card\">';\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tif( goods[key].preview.photo[1] ) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"ui slide reveal btnOpenGoodDetailsModal\" data-id=\"' + goods[key].id + '\" data-link=\"/' + goods[key].alias + '\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"ui\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(goods[key].preview.photo) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<img src=\"upload/goods/' + goods[key].alias + '/medium/' + goods[key].preview.photo[0] + '\" width=\"100%\" alt=\"' + goods[key].title + '\" class=\"visible content\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif( goods[key].preview.photo[1] ) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<img src=\"upload/goods/' + goods[key].alias + '/medium/' + goods[key].preview.photo[1] + '\" width=\"100%\" alt=\"' + goods[key].title + '\" class=\"hidden content\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"content btnOpenGoodDetailsModal\" data-id=\"' + goods[key].id + '\" data-link=\"/' + goods[key].alias + '\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<h3>' + goods[key].title + '</h3>';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"description text-ellipsis\">' + goods[key].subtitle + '</div>';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<p class=\"prices\"><span class=\"price\">' + moneyFormat(goods[key].prices.new) + ' р.</span> <span class=\"oldprice\">' + moneyFormat(goods[key].prices.old) + ' р.</span></p>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<div class=\"inline center\">';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thtml += '<button type=\"button\" class=\"ui fluid yellow button addToCart\" data-id=\"' + goods[key].id + '\" data-price=\"' + goods[key].prices.new + '\">В корзину</button>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '</div>'\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\r\n\t\t\t\t\t\t\t\t\tdocument.querySelector('#goodDetailsModal .modal-body').innerHTML = html;\r\n\t\t\t\t\t\t\t\t\tlet goodsSlider = tns({\r\n\t\t\t\t\t\t\t\t\t\tcontainer: '#goodsCarousel',\r\n\t\t\t\t\t\t\t\t\t\tgutter: 0,\r\n\t\t\t\t\t\t\t\t\t\titems: 4,\r\n\t\t\t\t\t\t\t\t\t\tslideBy: 'page',\r\n\t\t\t\t\t\t\t\t\t\tcontrolsPosition: 'bottom',\r\n\t\t\t\t\t\t\t\t\t\tcontrolsText: [\r\n\t\t\t\t\t\t\t\t\t\t\t'<i class=\"chevron left icon\"></i>',\r\n\t\t\t\t\t\t\t\t\t\t\t'<i class=\"chevron right icon\"></i>'\r\n\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\tnav: true,\r\n\t\t\t\t\t\t\t\t\t\tnavPosition: 'bottom',\r\n\t\t\t\t\t\t\t\t\t\tspeed: 300,\r\n\t\t\t\t\t\t\t\t\t\tautoplay: false,\r\n\t\t\t\t\t\t\t\t\t\tautoplayTimeout: 1500,\r\n\t\t\t\t\t\t\t\t\t\tloop: true,\r\n\t\t\t\t\t\t\t\t\t\tresponsive:{\r\n\t\t\t\t\t\t\t\t\t\t\t0:{items:1,nav:false},\r\n\t\t\t\t\t\t\t\t\t\t\t480:{items:1,nav:false},\r\n\t\t\t\t\t\t\t\t\t\t\t768:{items: 3},\r\n\t\t\t\t\t\t\t\t\t\t\t970:{items: 4}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tlazyload: false\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t$('#goodDetailsModal').modal('show');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(error => {console.log('Request failed', error);});\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t});\r\n\r\n\r\n        }).catch(error => {console.error('Request failed', error);});\r\n\t\r\n\r\n\tconst btnOpenCartEl = document.querySelector('.btnOpenCart');\r\n    if(btnOpenCartEl) {\r\n        btnOpenCartEl.onclick = () => {\r\n            generateModalCart();\r\n            $('#cartModal').modal('show');\r\n        }\r\n        btnOpenCartEl.oncontextmenu = () => {\r\n            return false;\r\n        }\r\n\t}\r\n\r\n\tconst mainTriggers = {\r\n\t\titems: [\r\n\t\t\t{number: 1, text: 'Раскраска напечатана экологичными чернилами, которые не дают аллергических реакций'},\r\n\t\t\t{number: 2, text: 'Плотная бумага не рвется и не мнется'},\r\n\t\t\t{number: 3, text: 'Изображены рисунки без мелких деталей'}\r\n\t\t],\r\n\t\tgenerateHTML() {\r\n\t\t\tlet html = '<div class=\"ui stackable grid\"><div class=\"three column row\">';\r\n\t\t\tfor(let item of this.items) {\r\n\t\t\t\tlet {number: itemNumber, text: itemText} = item;\r\n\t\t\t\thtml += `<div class=\"column\">\r\n\t\t\t\t\t<div class=\"ui items\">\r\n\t\t\t\t\t\t<div class=\"item\">\r\n\t\t\t\t\t\t\t<div class=\"ui tiny\">\r\n\t\t\t\t\t\t\t\t<div class=\"yellow_square\"></div>\r\n\t\t\t\t\t\t\t\t<span>0${itemNumber}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"middle aligned content\">\r\n\t\t\t\t\t\t\t\t<p>${itemText}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>`;\r\n\t\t\t}\r\n\t\t\thtml += '</div></div>';\r\n\t\t\treturn html;\r\n\t\t}\r\n\t};\r\n\r\n\tconst triggersEl = document.querySelector('.triggers');\r\n\tif(triggersEl) {\r\n\t\ttriggersEl.innerHTML = mainTriggers.generateHTML();\r\n\t}\r\n\r\n\t// Переключение отображения товаров по категориям\r\n\tconst filterLinks = document.querySelectorAll('.filter li a');\r\n\tif(filterLinks) {\r\n\t\tfilterLinks.forEach(function(link) {\r\n\t\t\tlink.addEventListener('click', function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tdocument.querySelectorAll('.filter li').forEach(li => li.classList.remove('active'));\r\n\t\t\t\tthis.parentElement.classList.add('active');\r\n\t\t\t\tlet categoryAlias = this.getAttribute('href').slice(1) || this.getAttribute('data-filter');\r\n\t\t\t\tif( categoryAlias != 'all' ) {\r\n\t\t\t\t\tdocument.querySelectorAll('.ui.cards>.card').forEach((el) => {\r\n\t\t\t\t\t\tel.style.display = 'none';\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdocument.querySelectorAll('.ui.cards>.card.' + categoryAlias).forEach((el) => {\r\n\t\t\t\t\t\tel.style.display = 'block';\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.querySelectorAll('.ui.cards>.card').forEach((el) => {\r\n\t\t\t\t\t\tel.style.display = 'block';\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n};\r\n\r\n// LIGHTBOX\r\nconst lightbox = new SimpleLightbox('a[data-lightbox=\"gallery\"]', {\r\n\tsourceAttr: 'href',\r\n\toverlay: true,\r\n\tspinner: true,\r\n\tnav: true,\r\n\tnavText: ['←','→'],\r\n\tcaptions: true,\r\n\tcaptionSelector: 'img',\r\n\tcaptionType: 'attr'\r\n});\r\n\r\n// TINY SLIDER\r\nif(document.querySelector('#reviewTinySlider')) {\r\n\tlet slider = tns({\r\n\t\tcontainer: '#reviewTinySlider',\r\n\t\tgutter: 80,\r\n\t\tedgePadding: 0,\r\n\t\titems: 3,\r\n\t\tslideBy: 'page',\r\n\t\tcontrolsPosition: 'bottom',\r\n\t\tcontrolsText: [\r\n\t\t\t'<i class=\"chevron left icon\"></i>',\r\n\t\t\t'<i class=\"chevron right icon\"></i>'\r\n\t\t],\r\n\t\tnav: true,\r\n\t\tnavPosition: 'bottom',\r\n\t\tspeed: 300,\r\n\t\tautoplay: false,\r\n\t\tautoplayTimeout: 1500,\r\n\t\tloop: true,\r\n\t\tresponsive:{\r\n\t\t\t0:{items:1,nav:false},\r\n\t\t\t480:{items:1,nav:false},\r\n\t\t\t768:{items: 2},\r\n\t\t\t970:{items: 3},\r\n\t\t},\r\n\t\tlazyload: true\r\n\t});\r\n}\r\n\r\n// ADD GOOD TO CART\r\nif(document.body && document.querySelectorAll('.addToCart')) {\r\n\tdocument.body.addEventListener('click', function (e) {\r\n\t\tif (e.target && e.target.classList.contains('addToCart')) {\r\n\t\t\te.target.disabled = true;\r\n\t\t\tlet goodId = parseInt(e.target.dataset.id);\r\n\t\t\tlet price = parseFloat(e.target.dataset.price);\r\n\t\t\tif(goodId) {\r\n\t\t\t\tlet cartData = JSON.parse(localStorage.getItem('cart')) || {};\r\n\t\t\t\tif(cartData.hasOwnProperty(goodId)){\r\n\t\t\t\t\tcartData[goodId] += 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcartData[goodId] = 1;\r\n\t\t\t\t}\r\n\t\t\t\tlocalStorage.setItem('cart', JSON.stringify(cartData));\r\n\t\t\t}\r\n\t\t\tgenerateModalCart();\r\n\t\t\t$('#cartModal').modal('show');\r\n\t\t\t\r\n\t\t\tif( typeof fbq != 'undefined' ) {\r\n\t\t\t\tfbq('track','AddToCart',{\r\n\t\t\t\t\tvalue: price,\r\n\t\t\t\t\tcurrency: 'RUB',\r\n\t\t\t\t\tcontent_type: 'product',\r\n\t\t\t\t\tcontent_ids: String(goodId)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\te.target.disabled = false;\r\n\t\t\tconsole.clear();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// NUMBER SPINNER\r\nif(document.body && document.querySelectorAll('.number-spinner-button')) {\r\n\tdocument.body.addEventListener('click', function (e) {\r\n\t\tif (e.target && e.target.classList.contains('number-spinner-button')) {\r\n\t\t\tlet numberSpinnerInput = Array.from(e.target.parentNode.children).filter((child) => child !== e.target && child.tagName == 'INPUT');\r\n\t\t\tif(numberSpinnerInput) {\r\n\t\t\t\tlet oldValue = parseInt(numberSpinnerInput[0].value.trim()), newVal = 0;\r\n\t\t\t\tlet goodId = numberSpinnerInput[0].dataset.id;\r\n\t\t\t\tif (e.target.dataset.dir == 'up') {\r\n\t\t\t\t\tnewVal = parseInt(oldValue) + 1;\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (oldValue >= 1) {\r\n\t\t\t\t\t\tnewVal = parseInt(oldValue) - 1;\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewVal = 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(oldValue >= 1 && newVal == 0 ) {\r\n\t\t\t\t\tdocument.querySelector('.btnDeleteCartGood[data-id=\"' + goodId + '\"]').click();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnumberSpinnerInput[0].value = newVal;\r\n\t\t\t\t\tlet cartData = JSON.parse(localStorage.getItem('cart')) || {};\r\n\t\t\t\t\tcartData[goodId] = newVal;\r\n\t\t\t\t\tlocalStorage.setItem('cart', JSON.stringify(cartData));\r\n\t\t\t\t\tgenerateModalCart();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// DELETE GOOD FROM CART\r\nif(document.body && document.querySelectorAll('.btnDeleteCartGood')) {\r\n\tdocument.body.addEventListener('click', function (e) {\r\n\t\tif (e.target && e.target.classList.contains('btnDeleteCartGood')) {\r\n\t\t\te.target.setAttribute('disabled', 'disabled');\r\n\t\t\tlet result = window.confirm('Вы уверены, что хотите удалить товар из корзины');\r\n\t\t\tif(result == true) {\r\n\t\t\t\tlet goodId = parseInt(e.target.dataset.id);\r\n\t\t\t\tif(goodId) {\r\n\t\t\t\t\tlet cartData = JSON.parse(localStorage.getItem('cart')) || {};\r\n\t\t\t\t\tdelete cartData[goodId];\r\n\t\t\t\t\tlocalStorage.setItem('cart', JSON.stringify(cartData));\r\n\t\t\t\t\tgenerateModalCart();\r\n\t\t\t\t\t$('#cartModal').modal('show');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\te.target.removeAttribute('disabled');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// CLOSE GOOD DETAILS MODAL\r\nif(document.querySelector('.btnCloseGoodDetailsModal')) {\r\n\tdocument.querySelector('.btnCloseGoodDetailsModal').onclick = () => {\r\n\t\t$('#goodDetailsModal').modal('hide');\r\n\t};\r\n}\r\n\r\n\r\n\r\n// LAZY LOAD\r\nconst lazyImages = document.querySelectorAll('.lazy');\r\nconst observer = new IntersectionObserver(images => {\r\n\timages.forEach(image => {\r\n\t\tif(image.intersectionRatio > 0) {\r\n\t\t\timage.target.src = image.target.getAttribute('data-src');\r\n\t\t}\r\n\t});\r\n}, {\r\n\troot: null,\r\n\trootMargin: '0px',\r\n\tthreshold: 0.1\r\n});\r\nlazyImages.forEach(image => {\r\n\tobserver.observe(image);\r\n});\r\n\r\n// SCROLL TO ELEMENT\r\nlet scrollBtnLinkEls = document.getElementsByClassName('scroll-btn-link');\r\nif(scrollBtnLinkEls) {\r\n\tfor(let link of scrollBtnLinkEls) {\r\n\t\tlink.onclick = function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet target = e.target.dataset.target || this.getAttribute('href');\r\n\t\t\tif(target) {\r\n\t\t\t\t/*var c = document.querySelector(target).getBoundingClientRect(),\r\n\t\t\t\tscrolltop = document.body.scrollTop + c.top,\r\n\t\t\t\tscrollleft = document.body.scrollLeft + c.left;\r\n\t\t\t\twindow.scrollTo(c.top,c.left);*/\r\n\t\t\t\t//window.scrollTo(0,0);\r\n\t\t\t\t//console.log(c)\r\n\t\t\t\t$('body, html').animate({ scrollTop: $(target).offset().top }, 1000);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\nlet orderId = parseInt($_GET('order_id'));\r\nif(orderId) {\r\n\tlet promise = new Promise( (resolve, reject) => {\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.open('GET', '/info.php?order_id=' + orderId, true);\r\n\t\trequest.onload = function() {\r\n\t\t\tif (this.status >= 200 && this.status < 400) {\r\n\t\t\t\t// Success!\r\n\t\t\t\tlet data = JSON.parse(this.response);\r\n\t\t\t\tresolve(data);\r\n\t\t\t\tlet goodUrl = location.pathname.trim().substr(1);\r\n\t\t\t\t\r\n\t\t\t\tif(goodUrl != 'thanks') {\r\n\t\t\t\t\tdocument.getElementById('paymentOrderId').value = data.id;\r\n\t\t\t\t\tif( goodUrl == 'prepay' ) {\r\n\t\t\t\t\t\tdocument.getElementById('paymentDescription').value = 'Предоплата за заказ №' + data.id;\r\n\t\t\t\t\t\tdocument.getElementById('paymentSum').value = data.delivery.cost;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.getElementById('paymentDescription').value = 'Оплата заказа №' + data.id;\r\n\t\t\t\t\t\tdocument.getElementById('paymentSum').value = data.sum;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif( document.getElementById('paymentDetails') ) {\r\n\t\t\t\t\r\n\t\t\t\t\tlet html = '<div class=\"ui segment\">';\r\n\r\n\t\t\t\t\t\thtml += '<div>';\r\n\t\t\t\t\t\t\thtml += '<h3>Детали заказа:</h3>';\r\n\t\t\t\t\t\t\thtml += '<ul>';\r\n\t\t\t\t\t\t\t\thtml += '<li>';\r\n\t\t\t\t\t\t\t\t\thtml += '<span>Номер заказа:</span>';\r\n\t\t\t\t\t\t\t\t\thtml += '<span>№' + data.id + '</span>';\r\n\t\t\t\t\t\t\t\thtml += '</li>';\r\n\t\t\t\t\t\t\t\thtml += '<li>';\r\n\t\t\t\t\t\t\t\t\thtml += '<span>ФИО плательщика:</span>';\r\n\t\t\t\t\t\t\t\t\thtml += '<span>' + data.fullname + '</span>';\r\n\t\t\t\t\t\t\t\thtml += '</li>';\r\n\t\t\t\t\t\t\t\t//html += '<li>';\r\n\t\t\t\t\t\t\t\t\t//html += '<span>Контактный телефон:</span>';\r\n\t\t\t\t\t\t\t\t\t//html += '<span>' + data.phone + '</span>';\r\n\t\t\t\t\t\t\t\t//html += '</li>';\r\n\t\t\t\t\t\t\thtml += '</ul>';\r\n\t\t\t\t\t\thtml += '</div>';\r\n\r\n\t\t\t\t\t\tif(data.items) {\r\n\t\t\t\t\t\t\thtml += '<div>';\r\n\t\t\t\t\t\t\t\thtml += '<h3>Состав заказа:</h3>';\r\n\t\t\t\t\t\t\t\t\thtml += '<ul>';\r\n\t\t\t\t\t\t\t\t\t\tfor(let i = 0; i < data.items.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '<li>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<span>' + data.items[i].title + '<br>(' + data.items[i].quantity + 'ш. ' + data.items[i].selling_price + 'р.)</span>';\r\n\t\t\t\t\t\t\t\t\t\t\t\thtml += '<span>' + data.items[i].quantity * data.items[i].selling_price + ' руб.</span>';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '</li>';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\thtml += '<li>';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '<span>Доставка<br>' + data.delivery.cost + ' руб</span>';\r\n\t\t\t\t\t\t\t\t\t\thtml += '</li>';\r\n\t\t\t\t\t\t\t\t\t\thtml += '<li>';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '<span><b>ИТОГО</b></span>';\r\n\t\t\t\t\t\t\t\t\t\t\thtml += '<span>' + data.sum + ' руб.</span>';\r\n\t\t\t\t\t\t\t\t\t\thtml += '</li>';\r\n\r\n\t\t\t\t\t\t\t\t\thtml += '</ul>';\r\n\t\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\thtml += '<div>';\r\n\t\t\t\t\t\t\thtml += '<h3>Адрес доставки:</h3>';\r\n\t\t\t\t\t\t\thtml += '<p>' + data.delivery.fulladdress + '</p>';\r\n\t\t\t\t\t\thtml += '</div>';\r\n\t\t\t\t\thtml += '</div>';\r\n\r\n\t\t\t\t\tdocument.getElementById('paymentDetails').innerHTML = html;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// We reached our target server, but it returned an error\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t};\r\n\t\trequest.onerror = () => {\r\n\t\t\t// There was a connection error of some sort\r\n\t\t\tconsole.error('something went wrong')\r\n\t\t\t//reject(error);\r\n\t\t};\r\n\t\trequest.send();\r\n\t} );\r\n\r\n\tpromise\r\n\t.then((data) => {\r\n\t\treturn data.created_at;\r\n\t})\r\n\t.then((date) => {\r\n\t\tconsole.log('Order created at', date);\r\n\t})\r\n\t.catch((error) => {\r\n\t\tconsole.log(error);\r\n\t});\r\n}\r\n\r\n// PREVENT DOUBLE CLICK\r\nif(document.querySelector('#cartProcessForm')) {\r\n\tdocument.querySelector('#cartProcessForm').addEventListener('submit', function(e) {\r\n\t\t//e.preventDefault();\r\n\t\tlet totalSum = parseFloat(document.querySelector('#submitCartForm').dataset.totalsum);\r\n\t\tlet goodsIds = document.querySelector('#cartModal form input[name=goods]').value;\r\n\t\t//console.log(goodsIds);\r\n\t\tfbq('track', 'Purchase', {\r\n\t\t\tvalue: totalSum,\r\n\t\t\tcurrency: 'RUB',\r\n\t\t\tcontent_type: 'product',\r\n\t\t\t//content_ids: goodsIds\r\n\t\t});\r\n\t\t//storage.clear();\r\n\t\tdocument.querySelector('#submitCartForm').disabled = true;\r\n\t});\r\n}\r\n\r\n// Scroll-to-top Button\r\nlet scrollToTopBtn = document.querySelector('.scrollToTopBtn');\r\nlet rootElement = document.documentElement;\r\nfunction handleScroll() {\r\n\tvar scrollTotal = rootElement.scrollHeight - rootElement.clientHeight\r\n\tif ((rootElement.scrollTop / scrollTotal ) > 0.80) {\r\n\t\tscrollToTopBtn.style.display = 'block';\r\n\t} else {\r\n\t\tscrollToTopBtn.style.display = 'none'\r\n\t}\r\n}\r\nfunction scrollToTop(e) {\r\n\te.preventDefault();\r\n\trootElement.scrollTo({\r\n\t\ttop: 0,\r\n\t\tbehavior: 'smooth'\r\n\t});\r\n}\r\nif(scrollToTopBtn) {\r\n\tscrollToTopBtn.addEventListener('click', scrollToTop);\r\n\tdocument.addEventListener('scroll', handleScroll);\r\n}\r\n\r\n// LOAD\r\ndocument.querySelectorAll('.include').forEach((tag) => {\r\n\tfetch(tag.dataset.file).then(res => {\r\n\t\treturn res.text();\r\n\t}).then(data => {\r\n\t\ttag.innerHTML = data\r\n\t});\r\n});\r\n\r\nlet cartModalNameEl = document.getElementById('cartModalName');\r\nif(cartModalNameEl) {\r\n\tcartModalNameEl.onkeypress = function(event) {\r\n\t\tif( (event.keyCode >= 48 && event.keyCode <= 57) || this.value.length > 100 ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// MASKED INPUT\r\nconst telInputs = document.querySelectorAll('input[type=\"tel\"]');\r\nif(telInputs) {\r\n\ttelInputs.forEach((input) => {\r\n\t\tlet mask = IMask(input, {\r\n\t\t\tmask: '+{7}(#00) 000-00-00',\r\n\t\t\tdefinitions: {\r\n\t\t\t\t'#': /[0-6|9]/\r\n\t\t\t},\r\n\t\t\tlazy: false,  // make placeholder always visible\r\n\t\t\tplaceholderChar: '_' // defaults to '_'\r\n\t\t});\r\n\t});\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n\t[].forEach.call(document.querySelectorAll('#delivery .ui.segment'), function(el) {\r\n\t\tel.addEventListener('click', function() {\r\n\t\t\tdocument.querySelectorAll('#delivery .ui.segment').forEach((e) => {\r\n\t\t\t\te.classList.remove('active');\r\n\t\t\t});\r\n\t\t\tlet ind = this.dataset.index;\r\n\t\t\tthis.classList.add('active');\r\n\t\t\tdocument.querySelector('#deliverySlide').setAttribute('src','/upload/pages/delivery-' + ind + '.jpg');\r\n\t\t})\r\n\t});\r\n});\r\n\r\nlet submitCartFormEl = document.getElementById('submitCartForm');\r\nlet cartFormCheckboxEl = document.getElementById('cartFormCheckbox');\r\n/*cartFormCheckboxEl.onchange = () => {\r\n    if( cartFormCheckboxEl.checked ) {\r\n        //submitCartFormEl\r\n    } else {\r\n        //submitCartFormEl\r\n    }\r\n}*/\r\n\r\nlet deliveryTypeEls = document.getElementsByName('delivery');\r\nif(deliveryTypeEls) {\r\n    for(let deliveryTypeEl of deliveryTypeEls) {\r\n        deliveryTypeEl.onchange = function() {\r\n            if( this.value != 'sd' ) {\r\n                document.getElementById('addressFormInput').style.display = 'block';\r\n            } else {\r\n                document.getElementById('addressFormInput').style.display = 'none';\r\n            }       \r\n        }\r\n    }\r\n}\r\nif(document.getElementById('copyrightYear')) {\r\n\tconst now = new Date();\r\n\tconst fullYear = now.getFullYear();\r\n\tconst copyrightYearEl = document.getElementById('copyrightYear');\r\n\tcopyrightYearEl.style.color = 'black';\r\n\tcopyrightYearEl.innerHTML = fullYear;\r\n}\r\nif(document.getElementById('cartFormSelect')) {\r\n\tlet cartFormSelectEl = document.getElementById('cartFormSelect');\r\n\tcartFormSelectEl.parentElement.style.display = 'none';\r\n\t/*cartFormSelectEl.onchange = () => {\r\n\t\t//alert(7);\r\n\t}*/\r\n}\r\n"],"sourceRoot":""}